<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Idex</title>

    <script>
        // WebSocket initialization
        const socket = new WebSocket('ws://localhost:9000/ws'); // Replace with your server's WebSocket address

        socket.onmessage = function(event) {
            const data = JSON.parse(event.data);
            const progressBar = document.getElementById('uploadProgress');
            progressBar.value = data.percentage;
            if (data.percentage === 100) {
                document.getElementById('progressContainer').style.display = 'none';
            } else {
                document.getElementById('progressContainer').style.display = 'block';
            }
        };
    </script>
</head>
<body>

<form enctype="multipart/form-data" method="post" th:action="@{/addVideo}">
    <input id="video" name="video" type="file">
    <button class="btn btn-primary" type="submit" value="Upload">Add Video</button>
</form>

<div id="progressContainer" style="display: none;">
    <progress id="uploadProgress" value="0" max="100"></progress>
</div>

<div th:each="video : ${videos}">
    <video controls controlsList="nodownload" height="360" th:src="${video.getPathToVideo()}" width="640"></video>
</div>

</body>
</html>